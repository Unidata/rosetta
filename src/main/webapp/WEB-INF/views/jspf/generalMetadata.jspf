<h3>Specify General Information</h3>
<p>Please provide the requested metadata:</p>
   <input type="hidden" name="globalMetadata" value="" id="globalMetadata"/>

    <div id="generalMetadataAssignment">
    </div>

    <div class="buttonNav">
        <%-- Show the previous button. --%>
        <input type="submit" name="submit" value="Previous" class="button"/>
        <%-- Show the next button. --%>
        <input type="submit" name="submit" id="Next" value="Next"
            <c:if test="${empty data.globalMetadata}">
                disabled
            </c:if>
           class="button
            <c:if test="${empty data.globalMetadata}">
                disabled
            </c:if>
        "/>
    </div>

<script>
    <c:choose>
        <c:when test="${not empty data.globalMetadata}">
            WebStorage.storeData("globalMetadata", '${data.globalMetadata}');
        </c:when>
        <c:otherwise>
            // Initialize storage.
            WebStorage.storeData("globalMetadata", "{}");
        </c:otherwise>
    </c:choose>
    

    var metadataProfileGeneralData = [];
    <%-- populate global metadata profile general data array with metadata profile info passed from the server-side --%>
    <c:forEach items="${metadataProfileGeneralData}" var="profile">
        
        var profile = {};
        profile["attributeName"] =  '${fn:escapeXml(profile.attributeName)}';
        profile["complianceLevel"]  = '${fn:escapeXml(profile.complianceLevel)}';
        profile["description"] = '${fn:escapeXml(profile.description)}';
        profile["displayName"] = '${fn:escapeXml(profile.displayName)}';
        profile["exampleValues"] = '${fn:escapeXml(profile.exampleValues)}';
        profile["metadataGroup"] = '${fn:escapeXml(profile.metadataGroup)}';
        metadataProfileGeneralData.push(profile);
    </c:forEach>

    GlobalMetadata.populateTags(metadataProfileGeneralData);

</script>


